/*!CK:789112057!*//*1380483984,178138185*/

if (self.CavalryLogger) { CavalryLogger.start_js(["6A0lI"]); }

__d("ChatGroupThreadsController",["ArbiterMixin","ChatConfig","InitialMultichatList","MercuryOrderedThreadlist","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","MessagingTag","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('ChatConfig'),i=b('InitialMultichatList'),j=b('MercuryOrderedThreadlist').get(),k=b('MercuryServerRequests').get(),l=b('MercuryThreadInformer').get(),m=b('MercuryThreads').get(),n=b('MessagingTag'),o=b('copyProperties'),p,q=[],r=h.get('max_sidebar_multichats',3);function s(x){var y=m.getThreadMetaNow(x);return y&&!y.is_canonical&&m.canReply(x);}var t=i.payload;if(t){k.handleUpdate(t);var u=t.threads||[];q=u.map(function(x){return x.thread_id;});}if(q.length){var v=m.getThreadMetaNow(q[q.length-1]);p=v&&(v.timestamp-1);}if(!p)p=Date.now();var w={};o(w,g,{getThreadIDs:function(){var x=0;return q.filter(function(y){return x<r&&s(y)&&++x;});}});l.subscribe('threadlist-updated',function(){q=j.getThreadlistUntilTimestamp(p,n.INBOX,n.GROUPS).filter(s);w.inform('update');});e.exports=w;});
__d("AbstractButton.react",["Link.react","ReactPropTypes","React","cx","invariant"],function(a,b,c,d,e,f){var g=b('Link.react'),h=b('ReactPropTypes'),i=b('React'),j=b('cx'),k=b('invariant');function l(n,o){if(n.props.className){n.props.className+=' '+o;}else n.props.className=o;}var m=i.createClass({displayName:'AbstractButton',propTypes:{image:function(n,o,p){var q=n[o];k(q==null||i.isValidComponent(q));return q;},depressed:h.bool,imageOnRight:h.bool,href:h.object},render:function(){var n=(("_42ft")+(this.props.disabled?' '+"_42fr":'')+(this.props.depressed?' '+"_42fs":'')),o=this.props.image,p=this.props.label;if(o&&p)if(this.props.imageOnRight){l(o,'mls');}else l(o,'mrs');if(o&&!o.props.key)o.props.key='image';if(p&&p.props&&!p.props.key)p.props.key='label';var q;if(this.props.href){q=g({disabled:null});}else{var r=this.props.type||'submit';q=i.DOM.button({type:r});if(r==='submit')q.props.value='1';}if(this.props.imageOnRight){q.props.children=[p,o];}else q.props.children=[o,p];q.props.className=n;q.props.label=null;return this.transferPropsTo(q);}});e.exports=m;});
__d("CacheStorage",["WebStorage","ErrorUtils","EventListener","startsWith"],function(a,b,c,d,e,f){var g=b('WebStorage'),h=b('ErrorUtils'),i=b('EventListener'),j=b('startsWith'),k={memory:t,localstorage:r,sessionstorage:s},l='_@_',m='3b',n='CacheStorageVersion';function o(v){this._store=v;}o.prototype.getStore=function(){return this._store;};o.prototype.keys=function(){var v=[];for(var w=0;w<this._store.length;w++)v.push(this._store.key(w));return v;};o.prototype.get=function(v){return this._store.getItem(v);};o.prototype.set=function(v,w){this._store.setItem(v,w);};o.prototype.remove=function(v){this._store.removeItem(v);};o.prototype.clear=function(){this._store.clear();};for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(){o.call(this,g.getLocalStorage());}r.available=function(){return !!g.getLocalStorage();};for(p in o)if(o.hasOwnProperty(p))s[p]=o[p];s.prototype=Object.create(q);s.prototype.constructor=s;s.__superConstructor__=o;function s(){o.call(this,g.getSessionStorage());}s.available=function(){return !!g.getSessionStorage();};function t(){this._store={};}t.prototype.getStore=function(){return this._store;};t.prototype.keys=function(){return Object.keys(this._store);};t.prototype.get=function(v){if(this._store[v]===undefined)return null;return this._store[v];};t.prototype.set=function(v,w){this._store[v]=w;};t.prototype.remove=function(v){if(v in this._store)delete this._store[v];};t.prototype.clear=function(){this._store={};};t.available=function(){return true;};function u(v,w){this._key_prefix=w||'_cs_';if(v=='AUTO'||!v)for(var x in k){var y=k[x];if(y.available()){v=x;break;}}if(v)if(typeof v=='string'){if(!k[v]||!k[v].available()){this._backend=new t();}else this._backend=new k[v]();}else if(!v.available||!v.available()){this._backend=new t();}else this._backend=v;var z=this.useBrowserStorage();if(z)i.listen(window,'storage',this._onBrowserValueChanged.bind(this));var aa=z?this._backend.getStore().getItem(n):this._backend.getStore()[n];if(aa!==m)this.clear();}u.prototype.useBrowserStorage=function(){return this._backend.getStore()===g.getLocalStorage()||this._backend.getStore()===g.getSessionStorage();};u.prototype.addValueChangeCallback=function(v){this._changeCallbacks=this._changeCallbacks||[];this._changeCallbacks.push(v);return {remove:function(){this._changeCallbacks.slice(this._changeCallbacks.indexOf(v),1);}.bind(this)};};u.prototype._onBrowserValueChanged=function(v){if(this._changeCallbacks&&j(v.key,this._key_prefix))this._changeCallbacks.forEach(function(w){w(v.key,v.oldValue,v.newValue);});};u.prototype.keys=function(){var v=[];h.guard(function(){if(this._backend){var w=this._backend.keys(),x=this._key_prefix.length;for(var y=0;y<w.length;y++)if(w[y].substr(0,x)==this._key_prefix)v.push(w[y].substr(x));}}.bind(this),'CacheStorage')();return v;};u.prototype.set=function(v,w,x){if(this._backend){var y;if(typeof w=='string'){y=l+w;}else if(!x){y={__t:Date.now(),__v:w};y=JSON.stringify(y);}else y=JSON.stringify(w);var z=this._backend,aa=this._key_prefix+v,ba=true;while(ba)try{z.set(aa,y);ba=false;}catch(ca){var da=z.keys().length;this._evictCacheEntries();ba=z.keys().length<da;}}};u.prototype._evictCacheEntries=function(){var v=[],w=this._backend;w.keys().forEach(function(y){if(y===n)return;var z=w.get(y);if(z===undefined){w.remove(y);return;}if(u._hasMagicPrefix(z))return;z=JSON.parse(z);if(z&&z.__t!==undefined&&z.__v!==undefined)v.push([y,z.__t]);});v.sort(function(y,z){return y[1]-z[1];});for(var x=0;x<Math.ceil(v.length/2);x++)w.remove(v[x][0]);};u.prototype.get=function(v,w){var x;if(this._backend){h.applyWithGuard(function(){x=this._backend.get(this._key_prefix+v);},this,null,function(){x=null;},'CacheStorage:get');if(x!==null){if(u._hasMagicPrefix(x)){x=x.substr(l.length);}else try{x=JSON.parse(x);if(x&&x.__t!==undefined&&x.__v!==undefined)x=x.__v;}catch(y){x=undefined;}}else x=undefined;}if(x===undefined&&w!==undefined){x=w;this.set(v,x);}return x;};u.prototype.remove=function(v){if(this._backend)h.applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+v],null,'CacheStorage:remove');};u.prototype.clear=function(){if(this._backend){h.applyWithGuard(this._backend.clear,this._backend,null,null,null,'CacheStorage:clear');if(this.useBrowserStorage()){this._backend.getStore().setItem(n,m);}else this._backend.getStore()[n]=m;}};u.getAllStorageTypes=function(){return Object.keys(k);};u._hasMagicPrefix=function(v){return v.substr(0,l.length)===l;};e.exports=u;});
__d("DropdownContextualHelpLink",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge'),i={set:function(j){var k=h('navHelpCenter');if(k!==null)g.replace(k,j);}};e.exports=i;});
__d("ChatApp",["CSS","JSLogger"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('JSLogger'),i=null;function j(k,l,m){if(i){h.create('chat_app').error('repeated_init');return;}i=this;this.$ChatApp0=k;d(['TabsViewport','ChatTabController','ChatTabViewCoordinator','MercuryServerRequests','MercuryChannelHandler','MercuryStateCheck'],function(n,o,p,q,r,s){q.get().handleUpdate(m);this.tabsViewport=new n(l);this.tabController=new o(this.tabsViewport);this.tabViewCoordinator=new p(l,this.tabsViewport);this.$ChatApp1=this.$ChatApp2=true;}.bind(this));}j.getInstance=function(){return i;};j.hide=function(){if(j.getInstance())j.getInstance().hide();};j.unhide=function(){if(j.getInstance())j.getInstance().unhide();};j.prototype.isHidden=function(){return this.$ChatApp3;};j.prototype.hide=function(){if(!this.$ChatApp1||this.$ChatApp3)return;g.hide(this.$ChatApp0);this.$ChatApp3=true;};j.prototype.unhide=function(){if(this.$ChatApp1){if(this.$ChatApp3){g.show(this.$ChatApp0);this.tabsViewport.checkWidth();d(['Dock'],function(k){k.resizeAllFlyouts();});this.$ChatApp3=false;}}else if(!this.$ChatApp2){d(['UIPagelet'],function(k){k.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');k.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this.$ChatApp2=true;}};e.exports=j;});